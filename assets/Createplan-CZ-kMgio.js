import{m as J,n as $,q as C,s as N,_ as O,x as D,l as w,c as L,b as i,a as g,w as I,d as P,v as j,h as z,F as V,f as H,g as T,r as Y,o as S,j as k,p as W,k as q}from"./index-n4pb3AiN.js";var G={exports:{}};(function(c,M){(function(p,m){c.exports=m(J)})($,function(p){function m(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var b=m(p),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,s){return s==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,s){var v=100*o+s;return v<600?"凌晨":v<900?"早上":v<1100?"上午":v<1300?"中午":v<1800?"下午":"晚上"}};return b.default.locale(a,null,!0),a})})(G);const Q={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"},K={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]},E={lang:C({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},Q),timePickerLocale:C({},K)};E.lang.ok="确定";var B={exports:{}};(function(c,M){(function(p,m){c.exports=m()})($,function(){function p(e){var r=[];return e.AMapUI&&r.push(m(e.AMapUI)),e.Loca&&r.push(b(e.Loca)),Promise.all(r)}function m(e){return new Promise(function(r,t){var d=[];if(e.plugins)for(var u=0;u<e.plugins.length;u+=1)o.AMapUI.plugins.indexOf(e.plugins[u])==-1&&d.push(e.plugins[u]);if(s.AMapUI===a.failed)t("前次请求 AMapUI 失败");else if(s.AMapUI===a.notload){s.AMapUI=a.loading,o.AMapUI.version=e.version||o.AMapUI.version,u=o.AMapUI.version;var h=document.body||document.head,n=document.createElement("script");n.type="text/javascript",n.src="https://webapi.amap.com/ui/"+u+"/main.js",n.onerror=function(f){s.AMapUI=a.failed,t("请求 AMapUI 失败")},n.onload=function(){if(s.AMapUI=a.loaded,d.length)window.AMapUI.loadUI(d,function(){for(var f=0,y=d.length;f<y;f++){var U=d[f].split("/").slice(-1)[0];window.AMapUI[U]=arguments[f]}for(r();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()});else for(r();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()},h.appendChild(n)}else s.AMapUI===a.loaded?e.version&&e.version!==o.AMapUI.version?t("不允许多个版本 AMapUI 混用"):d.length?window.AMapUI.loadUI(d,function(){for(var f=0,y=d.length;f<y;f++){var U=d[f].split("/").slice(-1)[0];window.AMapUI[U]=arguments[f]}r()}):r():e.version&&e.version!==o.AMapUI.version?t("不允许多个版本 AMapUI 混用"):v.AMapUI.push(function(f){f?t(f):d.length?window.AMapUI.loadUI(d,function(){for(var y=0,U=d.length;y<U;y++){var F=d[y].split("/").slice(-1)[0];window.AMapUI[F]=arguments[y]}r()}):r()})})}function b(e){return new Promise(function(r,t){if(s.Loca===a.failed)t("前次请求 Loca 失败");else if(s.Loca===a.notload){s.Loca=a.loading,o.Loca.version=e.version||o.Loca.version;var d=o.Loca.version,u=o.AMap.version.startsWith("2"),h=d.startsWith("2");if(u&&!h||!u&&h)t("JSAPI 与 Loca 版本不对应！！");else{u=o.key,h=document.body||document.head;var n=document.createElement("script");n.type="text/javascript",n.src="https://webapi.amap.com/loca?v="+d+"&key="+u,n.onerror=function(f){s.Loca=a.failed,t("请求 AMapUI 失败")},n.onload=function(){for(s.Loca=a.loaded,r();v.Loca.length;)v.Loca.splice(0,1)[0]()},h.appendChild(n)}}else s.Loca===a.loaded?e.version&&e.version!==o.Loca.version?t("不允许多个版本 Loca 混用"):r():e.version&&e.version!==o.Loca.version?t("不允许多个版本 Loca 混用"):v.Loca.push(function(f){f?t(f):t()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(a||(a={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},v={AMap:[],AMapUI:[],Loca:[]},_=[],l=function(e){typeof e=="function"&&(s.AMap===a.loaded?e(window.AMap):_.push(e))};return{load:function(e){return new Promise(function(r,t){if(s.AMap==a.failed)t("");else if(s.AMap==a.notload){var d=e.key,u=e.version,h=e.plugins;d?(window.AMap&&location.host!=="lbs.amap.com"&&t("禁止多种API加载方式混用"),o.key=d,o.AMap.version=u||o.AMap.version,o.AMap.plugins=h||o.AMap.plugins,s.AMap=a.loading,u=document.body||document.head,window.___onAPILoaded=function(f){if(delete window.___onAPILoaded,f)s.AMap=a.failed,t(f);else for(s.AMap=a.loaded,p(e).then(function(){r(window.AMap)}).catch(t);_.length;)_.splice(0,1)[0]()},h=document.createElement("script"),h.type="text/javascript",h.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+d+"&plugin="+o.AMap.plugins.join(","),h.onerror=function(f){s.AMap=a.failed,t(f)},u.appendChild(h)):t("请填写key")}else if(s.AMap==a.loaded)if(e.key&&e.key!==o.key)t("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)t("不允许多个版本 JSAPI 混用");else{if(d=[],e.plugins)for(u=0;u<e.plugins.length;u+=1)o.AMap.plugins.indexOf(e.plugins[u])==-1&&d.push(e.plugins[u]);d.length?window.AMap.plugin(d,function(){p(e).then(function(){r(window.AMap)}).catch(t)}):p(e).then(function(){r(window.AMap)}).catch(t)}else if(e.key&&e.key!==o.key)t("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)t("不允许多个版本 JSAPI 混用");else{var n=[];if(e.plugins)for(u=0;u<e.plugins.length;u+=1)o.AMap.plugins.indexOf(e.plugins[u])==-1&&n.push(e.plugins[u]);l(function(){n.length?window.AMap.plugin(n,function(){p(e).then(function(){r(window.AMap)}).catch(t)}):p(e).then(function(){r(window.AMap)}).catch(t)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},v={AMap:[],AMapUI:[],Loca:[]}}}})})(B);var R=B.exports;const x=N(R),A=c=>(W("data-v-bf582df1"),c=c(),q(),c),X={class:"create"},Z={class:"create"},ee={class:"input-box"},oe={class:"input-box"},ae={key:0},te={class:"road"},ne=A(()=>i("div",{id:"panel"},null,-1)),le={id:"roadmap"},se={class:"input-box"},ie={class:"input-box"},re={key:1},ue={class:"rectangle"},de=A(()=>i("p",null,"省份＋城市＋区县＋城镇＋乡村＋街道＋门牌号码",-1)),pe={id:"rectangletmap"},ce={class:"input-box"},ve={class:"input-box"},fe={class:"time-box"},me=A(()=>i("br",null,null,-1)),_e=A(()=>i("br",null,null,-1)),he={class:"start-button"},Me=A(()=>i("span",{class:"shadow"},null,-1)),ge=A(()=>i("span",{class:"edge"},null,-1)),be=A(()=>i("span",{class:"front"}," 创建 ",-1)),Ae=[Me,ge,be],we=A(()=>i("br",null,null,-1)),ye=A(()=>i("br",null,null,-1)),Ie=A(()=>i("br",null,null,-1)),Ye=A(()=>i("br",null,null,-1)),ke=A(()=>i("br",null,null,-1));D.locale("zh-cn");const Ue={setup(){return{value:D("2015-01-01","YYYY-MM-DD"),dayjs:D,locale:E}},data(){return{trnumber:10,access_token:"",refresh_token:"",partyid:null,data:[],road:[],routejson:null,map:null,map2:null,resultjson:{}}},methods:{rero(){this.routejson="",this.data="",this.map=new AMap.Map("roadmap",{viewMode:"3D",zoom:11,center:[116.397428,39.90923]})},remap(){this.routejson="",this.data="",this.map=new AMap.Map("rectangletmap",{viewMode:"2D",zoom:6,center:[116.397428,39.90923],map:null})},savero(c,M){const p=[{keyword:c},{keyword:M}];this.resultjson=p,console.log(p),window._AMapSecurityConfig={securityJsCode:"9a9a79b5c5fcc275c47bb5eafde2f7d3"},x.load({key:"8c9bb5684ff803ee1c6efecc3ea36578",version:"2.0",plugins:["AMap.Scale"]}).then(m=>{let b=new m.Map("roadmap",{viewMode:"2D",zoom:18,center:[118.397428,39.90923]});m.plugin(["AMap.ToolBar","AMap.Driving","AMap.Polyline","AMap.Marker"],function(){var a=new m.ToolBar;b.addControl(a);var o=new m.Driving({map:b,panel:"panel"});o.search(p,function(s,v){s==="complete"?(console.log(v),console.log(v.routes)):console.log("获取驾车数据失败："+v)})})}).catch(m=>{console.log(m)})},savemap(c){H.get("https://restapi.amap.com/v3/geocode/geo?address="+c+"&key=4a456acf68e96cfd42e35d8915c9cee0").then(M=>{console.log(M),this.data=M.data.geocodes[0].location.split(","),this.map=new AMap.Map("rectangletmap",{viewMode:"2D",zoom:19,center:this.data,map:null})}).catch(M=>{console.error(M)})},partycreate(c,M,p,m,b,a,o){const s=o[0],_=new Date(s).toISOString().slice(0,50),l=o[1],r=new Date(l).toISOString().slice(0,50);console.log(o),H.post("/bocchi/party/itinerary/create?title="+c+"&action_type="+M+"&party_id="+p+"&rectangle="+m+"&route_json="+b+"&remark="+a+"&schedule_start_time="+_+"&schedule_end_time="+r,{},{headers:{"access-token":this.access_token}}).then(t=>{console.log(t.data),t.data.base.code==1e4&&(console.log("创建成功"),this.$router.go(-1))}).catch(t=>{console.log(t)})}},mounted(){this.partyid=Number(this.$route.params.id),this.access_token=T.get("access_token"),this.refresh_token=T.get("refresh_token"),window._AMapSecurityConfig={securityJsCode:"9a9a79b5c5fcc275c47bb5eafde2f7d3"},x.load({key:"8c9bb5684ff803ee1c6efecc3ea36578",version:"2.0",plugins:["AMap.Scale"]}).then(c=>{this.map=new c.Map("rectangletmap",{viewMode:"2D",zoom:18,center:[116.397428,39.90923]})}).catch(c=>{console.log(c)}),x.load({key:"8c9bb5684ff803ee1c6efecc3ea36578",version:"2.0",plugins:["AMap.Scale"]}).then(c=>{this.map2=new c.Map("roadmap",{viewMode:"2D",zoom:18,center:[116.397428,39.90923]})}).catch(c=>{console.log(c)})},computed:{},watch:{}},Le=Object.assign(Ue,{__name:"Createplan",setup(c){const M=w(""),p=w("1"),m=w(),b=w(),a=w(),o=w();w();const s=w(),v=w([{value:"1",label:"路线"},{value:"2",label:"活动"},{value:"3",label:"住处"},{value:"4",label:"吃喝"},{value:"5",label:"其他"}]);return(_,l)=>{const e=Y("a-page-header"),r=Y("a-divider"),t=Y("a-input"),d=Y("a-select"),u=Y("a-textarea"),h=Y("a-range-picker");return S(),L(V,null,[i("div",X,[g(e,{style:{border:"1px solid rgb(235, 237, 240)"},title:"创建计划",onBack:l[0]||(l[0]=()=>_.$router.go(-1))})]),i("div",Z,[g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("计划名")]),_:1}),i("div",ee,[g(t,{value:M.value,"onUpdate:value":l[1]||(l[1]=n=>M.value=n),bordered:!1,size:"large",placeholder:"标题"},null,8,["value"])]),g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("活动类型")]),_:1}),i("div",oe,[g(d,{value:p.value,"onUpdate:value":l[2]||(l[2]=n=>p.value=n),size:"large",style:{width:"100%"},bordered:!1,placeholder:"请选择你的活动类型",options:v.value},null,8,["value","options"])]),P(g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("路线")]),_:1},512),[[j,!(p.value-1)]]),p.value-1?z("",!0):(S(),L("div",ae,[i("div",te,[ne,i("div",le,[i("button",{onClick:l[3]||(l[3]=n=>_.rero())},"刷新地图")]),i("div",se,[g(t,{value:b.value,"onUpdate:value":l[4]||(l[4]=n=>b.value=n),bordered:!1,size:"large",placeholder:"出发点"},null,8,["value"])]),i("div",ie,[g(t,{value:a.value,"onUpdate:value":l[5]||(l[5]=n=>a.value=n),bordered:!1,size:"large",placeholder:"结束点"},null,8,["value"])]),i("button",{onClick:l[6]||(l[6]=n=>_.rero())},"刷新地图"),i("button",{onClick:l[7]||(l[7]=n=>_.savero(b.value,a.value))},"保存路线")])])),P(g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("地点")]),_:1},512),[[j,p.value-1]]),p.value-1?(S(),L("div",re,[i("div",ue,[de,i("div",pe,[i("button",{onClick:l[8]||(l[8]=(...n)=>_.remap&&_.remap(...n))},"刷新地图")]),i("div",ce,[g(t,{value:o.value,"onUpdate:value":l[9]||(l[9]=n=>o.value=n),bordered:!1,size:"large",placeholder:"输入地点保存后可获取参考地图(可选)"},null,8,["value"])]),i("button",{onClick:l[10]||(l[10]=(...n)=>_.remap&&_.remap(...n))},"刷新地图"),i("button",{onClick:l[11]||(l[11]=n=>_.savemap(o.value))},"保存地点")])])):z("",!0),g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("备注")]),_:1}),i("div",ve,[g(u,{value:s.value,"onUpdate:value":l[12]||(l[12]=n=>s.value=n),placeholder:"备注",rows:4,size:"large",bordered:!1},null,8,["value"])]),g(r,{orientation:"left",class:"separate"},{default:I(()=>[k("起止时间")]),_:1}),i("div",fe,[g(h,{value:m.value,"onUpdate:value":l[13]||(l[13]=n=>m.value=n),size:"large",bordered:!1,"show-time":{format:"HH:mm"}},null,8,["value"])]),me,_e,i("div",he,[i("button",{class:"pushable",onClick:l[14]||(l[14]=n=>_.partycreate(M.value,p.value,_.partyid,this.data,this.routejson,s.value,m.value))},Ae)])]),we,ye,Ie,Ye,ke],64)}}}),xe=O(Le,[["__scopeId","data-v-bf582df1"]]);export{xe as default};
